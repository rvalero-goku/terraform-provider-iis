# IIS Infrastructure Configuration
# Define all your IIS servers and their resources here

servers:
  server1:
    host: "https://rey-colonvalero.projectpulse.me:55539"
    enabled: true
    # NTLM authentication (provider auto-generates API tokens)
    ntlm_username: "azureuser"
    ntlm_password: "0Go+j5}mdhn(_Ea?945wLrPX"
    # ntlm_domain: ""  # Optional, leave empty for local accounts
    insecure: true
    
  server2:
    host: "https://rey-colonvalero.projectpulse.me:55540"
    enabled: true
    # NTLM authentication (provider auto-generates API tokens)
    ntlm_username: "azureuser"
    ntlm_password: "0Go+j5}mdhn(_Ea?945wLrPX"
    # ntlm_domain: ""  # Optional, leave empty for local accounts
    insecure: true

# Application Pools - deployed to all enabled servers
application_pools:
  # DefaultAppPool:
  #   managed_runtime_version: "v4.0"
  #   status: "started"
  
  ProjectPulseAppPool:
    managed_runtime_version: "v4.0"
    status: "started"
  

# Websites - deployed to all enabled servers
websites:
  # "Default Web Site":
  #   physical_path: "C:\\inetpub\\ProjectPulse"
  #   application_pool: "DefaultAppPool"
  #   status: "stopped"
  #   bindings:
  #     - protocol: "http"
  #       port: 80
  #       ip_address: "*"
  #       hostname: ""
  
  ProjectPulse:
    physical_path: "C:\\inetpub\\ProjectPulse"
    application_pool: "ProjectPulseAppPool"
    status: "started"
    bindings:
      - protocol: "http"
        port: 80
        ip_address: "*"
        hostname: "rey-colonvalero.projectpulse.me"
      # - protocol: "http"
      #   port: 80
      #   ip_address: "*"
      #   hostname: ""
      - protocol: "https"
        port: 443
        ip_address: "*"
        hostname: "rey-colonvalero.projectpulse.me"
        certificate_cn: "rey-colonvalero.projectpulse.me"  # Certificate Common Name (without CN= prefix)
      # - protocol: "https"
      #   port: 444
      #   ip_address: "*"
      #   hostname: ""
      #   certificate_cn: "rey-colonvalero.projectpulse.me"  # Certificate Common Name (without CN= prefix)


# Directories - deployed to all enabled servers
directories:
  ProjectPulse:
    parent: "inetpub"  # Will use root location matching this name

# File operations - deployed to all enabled servers
file_operations:
  default_aspx:
    source_path: "C:\\ProgramData\\GuestConfig\\Configuration\\ProjectPulse\\Modules\\AdditionalFiles\\default.aspx"
    destination_path: "C:\\inetpub\\ProjectPulse"
    move: false  # Set to false to copy instead of move
